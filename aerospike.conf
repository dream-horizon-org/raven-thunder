# Aerospike Server Configuration for Docker
# This file is ONLY used by Docker Compose and is mounted into the Aerospike container
# For local development, configure Aerospike separately or use Docker
# Namespaces: thunder (user data) and thunder-admin (admin data)

service {
    user root
    run-as-daemon false
    pidfile /var/run/aerospike/aerospike.pid
    service-threads 4
    proto-fd-max 15000
    cluster-name docker
}

logging {
    file /var/log/aerospike/aerospike.log {
        context any info
    }
    console {
        context any info
    }
}

network {
    service {
        address any
        port 3000
    }
    heartbeat {
        mode mesh
        address any
        port 3002
        interval 150
        timeout 10
    }
    fabric {
        address any
        port 3001
    }
    info {
        address any
        port 3003
    }
}

namespace thunder {
    replication-factor 1
    default-ttl 0
    stop-writes-sys-memory-pct 90
    evict-indexes-memory-pct 90
    storage-engine memory {
        data-size 1G
        evict-used-pct 90
    }
}

namespace thunder-admin {
    replication-factor 1
    default-ttl 0
    stop-writes-sys-memory-pct 90
    evict-indexes-memory-pct 90
    storage-engine memory {
        data-size 1G
        evict-used-pct 90
    }
}
